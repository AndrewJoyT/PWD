<script>
    var produk=['anggur','apel','jeruk']
    var harga=[1000,20000,5000]
    var cart=[]
    var cartharga=[]
    var cartqty=[]
    function printProd(a){
        var output=''
        for(var i=0;i<a.length;i++){
            output+=(i+1)+' '+produk[i].toUpperCase()+' Rp.'+harga[i]+',00 \n'
        }
        return output
    }

    function printCart(cartuser){
        var output = ''
        if(cart.length==0){
            return 'Cart kosong mohon diisi'
        }
        for(var i=0; i<cartuser.length; i++){
            output+=`${i+1}. ${cart[i]} dengan harga Rp. ${cartharga[i]},00
            sebanyak ${cartqty[i]} dengan total harga ${cartharga[i]*cartqty[i]} 
            dengan total harga ${cartharga[i]*cartharga[i]}\n`
        }
        return output
    }

    function cartStruk (cartuser){
        var output=printCart(cartuser)+'===========\n'
        var totalbelanjaanharga=0
        for(var i=0; i<cartuser.length; i++){
            totalbelanjaanharga+=(cartqty[i]*cartharga[i])
        }
        output+=`total belanjaan kakak adalah Rp. ${totalbelanjaanharga},00`
        return output
    }

    alert(printProd(produk))
    do {
        var menuutama=prompt('1.user\n2.admin\n3.Exit')
        if(menuutama==1){
            do{
                var menuuser=prompt('1.Show\n2.Belanja')
                if(menuuser==1){
                    alert(printCart(cart))
                }else{
                    var konformasiuser=true
                    var pilih_belanja=prompt(printProd(produk)+'mau pilih yang mana kakak')
                    var jumlah_belanja=parseInt(prompt('Mau beli berapa Kg ?'))
                    var ada= false
                    var index=0
                    for(var i=0; i<cart.length; i++){
                        if(produk(pilih_belanja-1)==cart[i]){
                            ada=true
                            index=i
                        }
                    }
                    if(ada){
                        cartqty[index]+=jumlah_belanja
                    }else{
                        cart.push(produk[pilih_belanja-1])
                        cartharga.push(harga[pilih_belanja-1])
                        cartqty.push(jumlah_belanja)
                    }
                    konfirmasiuser=confirm('Belanja lagi nggak kakak?')
                    if(konfirmasiuser==false){
                        alert(cartStruk(cart))
                    }
                }  
                }    while(konformasiuser)
        }else if(menuutama==2){
            do {
                var menuadmin=prompt('1.Tambah data\n2.Update data\n3.Hapus data\n4.kembali ke menu utama')
                if(menuadmin==1){
                    do {
                        var newprod=prompt('masukkan produk baru kaka')
                        var newprice=parseInt(prompt('masukkan harga baru kakak')) 
                        produk.push(newprod)
                        harga.push(newprice)
                        alert(printProd(produk))
                        var konfirmasi1=confirm('mau ulang lagi nggak kaka')
                    } while (konfirmasi1);  
                }else if(menuadmin==2){
                    do {
                        alert(printProd(produk))
                        var pilihan=parseInt(prompt(printProd(produk))+'\nPilih produk ') 
                        var updateprod=prompt('masukkan nama product untuk menggantikan '+produk[pilihan-1])
                        var updateconfirm=confirm('yakin nggak mengganti produk dengan nama '+produk[pilihan-1]+' dengan '+updateprod)
                        if(updateconfirm){
                            produk.splice(pilihan-1,1,updateprod)
                            alert(printProd(produk))
                        }else{
                            alert('tidak jadi update')
                        }
                        var konfirmasi2=confirm('mau ulang update lagi nggak kaka')
                    } while (konfirmasi2);
                }else if(menuadmin==3){
        
                }else{
                    break
                }
            } while (true);
        }else{
            alert('selamat tinggal semoga kembali lagi')
            break
        }
    } while (true);
    </script> 